import{x as A,r as B,j as H,c as w,o as n,w as f,b as m,a as e,f as x,t as c,d,e as u,i as k,u as o,F as L,g as E,W as T}from"./app-CSuvz9uL.js";import{u as Z,_ as N}from"./AppLayout-DfuaShus.js";import{C as j}from"./Container-th1eeecE.js";import{_ as D,a as F,r as W,b as z}from"./Pill-yDAMQwnm.js";import{_ as U}from"./PrimaryButton-BlZvkoqq.js";import{_ as I}from"./InputError-BoyOdtVC.js";import{_ as q}from"./SecondaryButton-C546pmRJ.js";import{M as G}from"./MarkdownEditor-DWa8X-RD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ConfirmationModal-DgnFVCrA.js";import"./Modal-CiM1pMDv.js";const J={class:"text-2xl font-bold mt-2"},K=["innerHTML"],O={class:"w-full flex justify-center mt-8 border-t pt-8"},P={class:"max-w-screen-md w-full"},Q={key:0,class:"text-xl font-bold"},R={class:"text-right"},X={key:2},Y={class:"text-left divide-y"},ee={class:"flex items-center gap-2 mb-4"},te=["src"],se={class:"font-bold text-sm"},oe={class:"text-gray-600 text-xs"},le={key:0},ae=["onSubmit"],ne={key:1},re=["onClick"],ie=["innerHTML"],we={__name:"Show",props:["post","comments"],setup(l){let p=l,a=A({body:""}),i=B(null),h=H(()=>p.comments.data.find(r=>r.id===i.value)),b=r=>{var t;i.value=r,a.body=(t=h.value)==null?void 0:t.body},v=()=>{i.value=null,a.reset(),h.value=null},C=()=>{a.post(route("posts.comments.store",p.post.id),{onSuccess:()=>a.reset("body"),preserveScroll:!0})},$=()=>{a.patch(route("comments.update",{comment:i.value,page:p.comments.meta.current_page}),{onSuccess:()=>v(),preserveScroll:!0})},{confirmation:M}=Z(),S=async r=>{await M("Are you sure you want to delete the comment?")&&T.delete(route("comments.destroy",{comment:r,page:p.comments.meta.current_page}),{preserveScroll:!0})};return(r,t)=>(n(),w(N,{title:l.post.title},{default:f(()=>[m(j,null,{default:f(()=>[m(D,{link:r.route("posts.index",{topic:l.post.topic.slug})},{default:f(()=>[x(c(l.post.topic.name),1)]),_:1},8,["link"]),e("h1",J,c(l.post.title),1),m(F,{created_at:l.post.created_at,user:l.post.user},null,8,["created_at","user"]),e("article",{class:"mt-6 prose prose-sm max-w-none",innerHTML:l.post.html},null,8,K),e("div",O,[e("div",P,[l.comments.data.length>0?(n(),d("h2",Q,"Comments")):u("",!0),r.$page.props.auth.user?(n(),d("form",{key:1,onSubmit:t[2]||(t[2]=k(()=>o(i)?o($)():o(C)(),["prevent"])),class:"w-full mt-9"},[e("div",null,[m(G,{modelValue:o(a).body,"onUpdate:modelValue":t[0]||(t[0]=s=>o(a).body=s),editorClass:"min-h-[80px]",placeholder:"Write what you think..."},null,8,["modelValue"]),m(I,{message:o(a).errors.body},null,8,["message"])]),e("div",R,[m(U,{type:"submit",class:"mt-5 flex",disabled:o(a).processing,textContent:c(o(i)?"Update Comment":"Add Comment")},null,8,["disabled","textContent"]),o(i)?(n(),w(q,{key:0,class:"ml-2",onClick:t[1]||(t[1]=s=>o(v)())},{default:f(()=>t[3]||(t[3]=[x("Cancel")])),_:1})):u("",!0)])],32)):u("",!0),l.comments.data.length>0?(n(),d("div",X,[e("ul",Y,[(n(!0),d(L,null,E(l.comments.data,s=>{var _,g,y;return n(),d("div",{key:s.id,class:"px-2 py-4 my-2 hover:text-blue-800"},[e("div",ee,[e("span",null,[e("img",{src:s.user.profile_photo_path==null?"https://www.w3schools.com/w3images/avatar6.png":s.user.profile_photo_path,class:"rounded-full h-6"},null,8,te)]),e("span",se,c((_=s.user)==null?void 0:_.name),1),e("span",oe,c(o(W)(s.created_at))+" ago ",1),(g=s.can)!=null&&g.delete?(n(),d("span",le,[e("form",{onSubmit:k(V=>o(S)(s.id),["prevent"])},t[4]||(t[4]=[e("button",{type:"submit",title:"Delete"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"size-4 stroke-gray-300 hover:stroke-gray-500"},[e("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])],-1)]),40,ae)])):u("",!0),(y=s.can)!=null&&y.edit?(n(),d("span",ne,[e("button",{title:"Edit",onClick:V=>o(b)(s.id)},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"size-4 stroke-gray-500 hover:stroke-gray-600"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1)]),8,re)])):u("",!0)]),e("div",null,[e("div",{class:"mt-1 prose prose-sm max-w-none",innerHTML:s.html},null,8,ie)])])}),128))]),m(z,{meta:l.comments.meta,only:["comments"]},null,8,["meta"])])):u("",!0)])])]),_:1})]),_:1},8,["title"]))}};export{we as default};
