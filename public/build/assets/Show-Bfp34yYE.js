import{x as $,r as A,j as B,c as w,o as n,w as f,b as d,a as e,t as p,d as m,e as u,i as x,u as o,f as H,F as L,g as E,W as T}from"./app-BgmNypko.js";import{u as Z,_ as N}from"./AppLayout-DTjjWNwB.js";import{C as j}from"./Container-fGOW58IU.js";import{_ as D,r as F,a as W}from"./PostMetaData-BMGLC28z.js";import{_ as z}from"./PrimaryButton-yBh5taa4.js";import{_ as U}from"./InputError-kKCeWiKX.js";import{_ as I}from"./SecondaryButton-BmFzgYAe.js";import{M as q}from"./MarkdownEditor-pX3yaEUZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ConfirmationModal-DqCE6e3C.js";import"./Modal-D0R0iyP1.js";const G={class:"text-2xl font-bold"},J=["innerHTML"],K={class:"w-full flex justify-center mt-8 border-t pt-8"},O={class:"max-w-screen-md w-full"},P={key:0,class:"text-xl font-bold"},Q={class:"text-right"},R={key:2},X={class:"text-left divide-y"},Y={class:"flex items-center gap-2 mb-4"},ee=["src"],te={class:"font-bold text-sm"},se={class:"text-gray-600 text-xs"},oe={key:0},le=["onSubmit"],ae={key:1},ne=["onClick"],re=["innerHTML"],ye={__name:"Show",props:["post","comments"],setup(l){let c=l,a=$({body:""}),r=A(null),h=B(()=>c.comments.data.find(i=>i.id===r.value)),b=i=>{var t;r.value=i,a.body=(t=h.value)==null?void 0:t.body},v=()=>{r.value=null,a.reset(),h.value=null},k=()=>{a.post(route("posts.comments.store",c.post.id),{onSuccess:()=>a.reset("body"),preserveScroll:!0})},C=()=>{a.patch(route("comments.update",{comment:r.value,page:c.comments.meta.current_page}),{onSuccess:()=>v(),preserveScroll:!0})},{confirmation:M}=Z(),S=async i=>{await M("Are you sure you want to delete the comment?")&&T.delete(route("comments.destroy",{comment:i,page:c.comments.meta.current_page}),{preserveScroll:!0})};return(i,t)=>(n(),w(N,{title:l.post.title},{default:f(()=>[d(j,null,{default:f(()=>[e("h1",G,p(l.post.title),1),d(D,{created_at:l.post.created_at,user:l.post.user},null,8,["created_at","user"]),e("article",{class:"mt-6 prose prose-sm max-w-none",innerHTML:l.post.html},null,8,J),e("div",K,[e("div",O,[l.comments.data.length>0?(n(),m("h2",P,"Comments")):u("",!0),i.$page.props.auth.user?(n(),m("form",{key:1,onSubmit:t[2]||(t[2]=x(()=>o(r)?o(C)():o(k)(),["prevent"])),class:"w-full mt-9"},[e("div",null,[d(q,{modelValue:o(a).body,"onUpdate:modelValue":t[0]||(t[0]=s=>o(a).body=s),editorClass:"min-h-[80px]",placeholder:"Write what you think..."},null,8,["modelValue"]),d(U,{message:o(a).errors.body},null,8,["message"])]),e("div",Q,[d(z,{type:"submit",class:"mt-5 flex",disabled:o(a).processing,textContent:p(o(r)?"Update Comment":"Add Comment")},null,8,["disabled","textContent"]),o(r)?(n(),w(I,{key:0,class:"ml-2",onClick:t[1]||(t[1]=s=>o(v)())},{default:f(()=>t[3]||(t[3]=[H("Cancel")])),_:1})):u("",!0)])],32)):u("",!0),l.comments.data.length>0?(n(),m("div",R,[e("ul",X,[(n(!0),m(L,null,E(l.comments.data,s=>{var _,g,y;return n(),m("div",{key:s.id,class:"px-2 py-4 my-2 hover:text-blue-800"},[e("div",Y,[e("span",null,[e("img",{src:s.user.profile_photo_path==null?"https://www.w3schools.com/w3images/avatar6.png":s.user.profile_photo_path,class:"rounded-full h-6"},null,8,ee)]),e("span",te,p((_=s.user)==null?void 0:_.name),1),e("span",se,p(o(F)(s.created_at))+" ago ",1),(g=s.can)!=null&&g.delete?(n(),m("span",oe,[e("form",{onSubmit:x(V=>o(S)(s.id),["prevent"])},t[4]||(t[4]=[e("button",{type:"submit",title:"Delete"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"size-4 stroke-gray-300 hover:stroke-gray-500"},[e("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])],-1)]),40,le)])):u("",!0),(y=s.can)!=null&&y.edit?(n(),m("span",ae,[e("button",{title:"Edit",onClick:V=>o(b)(s.id)},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"size-4 stroke-gray-500 hover:stroke-gray-600"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1)]),8,ne)])):u("",!0)]),e("div",null,[e("div",{class:"mt-1 prose prose-sm max-w-none",innerHTML:s.html},null,8,re)])])}),128))]),d(W,{meta:l.comments.meta,only:["comments"]},null,8,["meta"])])):u("",!0)])])]),_:1})]),_:1},8,["title"]))}};export{ye as default};
