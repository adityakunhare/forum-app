import{d as m,e as c,o as n,a as e,t as h,u as t,c as f,w as p,S as x,x as H,r as Z,j as E,b as d,h as T,f as y,i as C,F as b,g as j,W as N}from"./app-CbGs38Cc.js";import{u as D,_ as F}from"./AppLayout-aDq5A_Rg.js";import{C as W}from"./Container-B0zMiD8A.js";import{_ as z,a as U,r as I,b as O}from"./Pill-bMSAVzTf.js";import{_ as q}from"./PrimaryButton-CS-_GwKb.js";import{_ as G}from"./InputError-8tpgQExX.js";import{_ as J}from"./SecondaryButton-BSL_KuqU.js";import{M as K}from"./MarkdownEditor-CzFhybwu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ConfirmationModal-Bql8_7Cr.js";import"./Modal-DM0HPLwz.js";const P={key:0,class:"text-red-700 font-bold text-sm flex items-center gap-1"},Q={class:"mx-2"},$={__name:"Likeable",props:{like:Object,parameters:Array},setup(s){let i=s;return(a,r)=>a.$page.props.auth.user?(n(),m("div",P,[e("div",null,h(t(i).like.likes_count),1),e("div",Q,[t(i).like.can.like?(n(),f(t(x),{key:0,href:a.route("likes.store",t(i).parameters),method:"post",class:"mt-1","preserve-scroll":"true"},{default:p(()=>r[0]||(r[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"15px",width:"15px","stroke-width":"2",fill:"none",stroke:"currentColor"},[e("path",{d:"M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.637 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.637 1.49571 7.01901 3.75736 4.75736C6.02157 2.49315 9.64519 2.41687 12.001 4.52853Z"})],-1)])),_:1},8,["href"])):(n(),f(t(x),{key:1,href:a.route("likes.destroy",t(i).parameters),method:"delete",class:"mt-1","preserve-scroll":"true"},{default:p(()=>r[1]||(r[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"16px",width:"16px",fill:"rgba(206,4,4,1)"},[e("path",{d:"M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.637 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.637 1.49571 7.01901 3.75736 4.75736C6.02157 2.49315 9.64519 2.41687 12.001 4.52853Z"})],-1)])),_:1},8,["href"]))])])):c("",!0)}},R=["href"],X={class:"text-2xl font-bold mt-2"},Y={class:"mt-4"},ee=["innerHTML"],te={class:"w-full flex justify-center mt-8 border-t pt-8"},se={class:"max-w-screen-md w-full"},oe={key:0,class:"text-xl font-bold"},le={class:"text-right"},ae={key:2},re={class:"text-left divide-y"},ne={class:"flex items-center gap-2 mb-4"},ie=["src"],de={class:"font-bold text-sm"},me={class:"text-gray-600 text-xs"},ue={key:0},ce=["onSubmit"],pe={key:1},he=["onClick"],fe=["innerHTML"],ve={class:"mt-4"},ge={class:"text-red-700 font-bold text-sm flex items-center gap-1"},Ae={__name:"Show",props:["post","comments"],setup(s){let i=s,a=H({body:""}),r=Z(null),v=E(()=>i.comments.data.find(u=>u.id===r.value)),L=u=>{var o;r.value=u,a.body=(o=v.value)==null?void 0:o.body},g=()=>{r.value=null,a.reset(),v.value=null},M=()=>{a.post(route("posts.comments.store",i.post.id),{onSuccess:()=>a.reset("body"),preserveScroll:!0})},S=()=>{a.patch(route("comments.update",{comment:r.value,page:i.comments.meta.current_page}),{onSuccess:()=>g(),preserveScroll:!0})},{confirmation:A}=D(),B=async u=>{await A("Are you sure you want to delete the comment?")&&N.delete(route("comments.destroy",{comment:u,page:i.comments.data.length>1?i.comments.meta.current_page:Math.max(i.comments.meta.current_page-1,1)}),{preserveScroll:!0})};return(u,o)=>(n(),m(b,null,[d(t(T),null,{default:p(()=>[e("link",{rel:"canonical",href:s.post.routes.show},null,8,R)]),_:1}),d(F,{title:s.post.title},{default:p(()=>[d(W,null,{default:p(()=>[d(z,{link:u.route("posts.index",{topic:s.post.topic.slug})},{default:p(()=>[y(h(s.post.topic.name),1)]),_:1},8,["link"]),e("h1",X,h(s.post.title),1),d(U,{created_at:s.post.created_at,user:s.post.user},null,8,["created_at","user"]),e("div",Y,[d($,{like:s.post,parameters:["post",s.post.id]},null,8,["like","parameters"])]),e("article",{class:"mt-6 prose prose-sm max-w-none",innerHTML:s.post.html},null,8,ee),e("div",te,[e("div",se,[s.comments.data.length>0?(n(),m("h2",oe,"Comments")):c("",!0),u.$page.props.auth.user?(n(),m("form",{key:1,onSubmit:o[2]||(o[2]=C(()=>t(r)?t(S)():t(M)(),["prevent"])),class:"w-full mt-9"},[e("div",null,[d(K,{modelValue:t(a).body,"onUpdate:modelValue":o[0]||(o[0]=l=>t(a).body=l),editorClass:"min-h-[80px]",placeholder:"Write what you think..."},null,8,["modelValue"]),d(G,{message:t(a).errors.body},null,8,["message"])]),e("div",le,[d(q,{type:"submit",class:"mt-5 flex",disabled:t(a).processing,textContent:h(t(r)?"Update Comment":"Add Comment")},null,8,["disabled","textContent"]),t(r)?(n(),f(J,{key:0,class:"ml-2",onClick:o[1]||(o[1]=l=>t(g)())},{default:p(()=>o[3]||(o[3]=[y("Cancel")])),_:1})):c("",!0)])],32)):c("",!0),s.comments.data.length>0?(n(),m("div",ae,[e("ul",re,[(n(!0),m(b,null,j(s.comments.data,l=>{var _,w,k;return n(),m("div",{key:l.id,class:"px-2 py-4 my-2 hover:text-blue-800"},[e("div",ne,[e("span",null,[e("img",{src:l.user.profile_photo_path==null?"https://www.w3schools.com/w3images/avatar6.png":l.user.profile_photo_path,class:"rounded-full h-6"},null,8,ie)]),e("span",de,h((_=l.user)==null?void 0:_.name),1),e("span",me,h(t(I)(l.created_at))+" ago ",1),(w=l.can)!=null&&w.delete?(n(),m("span",ue,[e("form",{onSubmit:C(V=>t(B)(l.id),["prevent"])},o[4]||(o[4]=[e("button",{type:"submit",title:"Delete"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"size-4 stroke-gray-300 hover:stroke-gray-500"},[e("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])],-1)]),40,ce)])):c("",!0),(k=l.can)!=null&&k.edit?(n(),m("span",pe,[e("button",{title:"Edit",onClick:V=>t(L)(l.id)},o[5]||(o[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"size-4 stroke-gray-500 hover:stroke-gray-600"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1)]),8,he)])):c("",!0)]),e("div",null,[e("div",{class:"mt-1 prose prose-sm max-w-none",innerHTML:l.html},null,8,fe),e("div",ve,[e("span",ge,[d($,{like:l,parameters:["comment",l.id]},null,8,["like","parameters"])])])])])}),128))]),d(O,{meta:s.comments.meta,only:["comments"]},null,8,["meta"])])):c("",!0)])])]),_:1})]),_:1},8,["title"])],64))}};export{Ae as default};
